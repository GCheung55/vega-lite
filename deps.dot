digraph G {
	rankdir=BT;

	scale [style="dashed"]
    	marks [style="dashed"]
	rankscale [style="dashed"]
	raw [style="dashed"]
	layout [style="dashed"]

	filter -> formula  // filter computed values

	//nonposfilter -> formula

	//nullfilter -> formula  // automatic nullfilter

	formula // formula has no dependencies

	timeunit -> formula

	aggregate -> filter // filtered aggregate
	aggregate -> bin // group by bin
	aggregate -> formula // aggregate of computed value
	aggregate -> timeunit  // group by time unit
	aggregate -> selectionfilter  // aggregate after filtering

	bin -> formula // bin a computed value
	bin -> filter // we want to compute bin over the filtered data to make sure we have the right bin sized

	stacksum -> aggregate  // we can stack aggregates

	marks -> aggregate
	marks -> nullfilter

	rank -> aggregate
	rankscale -> rank

	selectionfilter -> bin  // selectionfilter comes after binning
	selectionfilter -> timeunit

	scale -> nonposfilter

    	// depends on either of these
	nonposfilter -> raw [style="dashed"]
	nonposfilter -> stacksum [style="dashed"]

	aggregate -> raw
	raw -> selectionfilter

	layout -> marks  // layout can use the same things as marks
}
